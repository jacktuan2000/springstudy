<?xml version="1.0" encoding="UTF-8"?>  
<!DOCTYPE beans PUBLIC "-//SPRING//DTD BEAN//EN" "spring-beans.dtd" >  
<beans>  
     
     <!-- 所有定时任务 统一到 /src/main/java/com/ycnet/belink/service/timmertask -->
     
  <!--     
	
	更新统计信息
	<bean id="buildOnlineCount" class="org.springframework.scheduling.quartz.MethodInvokingJobDetailFactoryBean">
		<property name="targetObject">
			<ref bean="reportService" />
		</property>
		<property name="targetMethod">
			<value>buildOnlineCount</value>
		</property>
	</bean>	
	
	<bean id="buildOnlineCountTrigger" class="org.springframework.scheduling.quartz.CronTriggerBean">
		<property name="jobDetail">
			<ref bean="buildOnlineCount" />
		</property>
		<property name="cronExpression">
			<value>0/30 * * * * ?</value>
		</property>
	</bean>
	每天零时清除记录，新建当天记录
	<bean id="clearOnlineCount" class="org.springframework.scheduling.quartz.MethodInvokingJobDetailFactoryBean">
		<property name="targetObject">
			<ref bean="reportService" />
		</property>
		<property name="targetMethod">
			<value>clearOnlineCount</value>
		</property>
	</bean>
	<bean id="clearOnlineCountTrigger" class="org.springframework.scheduling.quartz.CronTriggerBean">
		<property name="jobDetail">
			<ref bean="clearOnlineCount" />
		</property>
		<property name="cronExpression">
			<value>0 0 0 * * ?</value>
		</property>
	</bean>
	
	每小时同步统计数据
	
	<bean id="updateOnlineCount" class="org.springframework.scheduling.quartz.MethodInvokingJobDetailFactoryBean">
		<property name="targetObject">
			<ref bean="reportService" />
		</property>
		<property name="targetMethod">
			<value>updateOnlineCount</value>
		</property>
	</bean>
	<bean id="updateOnlineCountTrigger" class="org.springframework.scheduling.quartz.CronTriggerBean">
		<property name="jobDetail">
			<ref bean="updateOnlineCount" />
		</property>
		<property name="cronExpression">
			<value>0 0 0 * * ?</value>
		</property>
	</bean>
	
	<bean id="buildAtStatistic" class="org.springframework.scheduling.quartz.MethodInvokingJobDetailFactoryBean">
		<property name="targetObject">
			<ref bean="reportService" />
		</property>
		<property name="targetMethod">
			<value>buildAtStatistic</value>
		</property>
	</bean>
	<bean id="buildAtStatisticTrigger" class="org.springframework.scheduling.quartz.CronTriggerBean">
		<property name="jobDetail">
			<ref bean="buildAtStatistic" />
		</property>
		<property name="cronExpression">
			<value>0 30 23 * * ?</value>
		</property>
	</bean>
	
	
	
	<bean id="buildAcessUserCount" class="org.springframework.scheduling.quartz.MethodInvokingJobDetailFactoryBean">
		<property name="targetObject">
			<ref bean="reportService" />
		</property>
		<property name="targetMethod">
			<value>buildAcessUserCount</value>
		</property>
	</bean>
	<bean id="buildAcessUserCountTrigger" class="org.springframework.scheduling.quartz.CronTriggerBean">
		<property name="jobDetail">
			<ref bean="buildAcessUserCount" />
		</property>
		<property name="cronExpression">
			<value>0 30 23 * * ?</value>
		</property>
	</bean>
	
	
	
	<bean id="buildVisitCount" class="org.springframework.scheduling.quartz.MethodInvokingJobDetailFactoryBean">
		<property name="targetObject">
			<ref bean="reportService" />
		</property>
		<property name="targetMethod">
			<value>buildVisitCount</value>
		</property>
	</bean>
	<bean id="buildVisitCountTrigger" class="org.springframework.scheduling.quartz.CronTriggerBean">
		<property name="jobDetail">
			<ref bean="buildVisitCount" />
		</property>
		<property name="cronExpression">
			<value>0 30 23 * * ?</value>
		</property>
	</bean>
	
	
	热门 话题统计
	<bean id="buildEventRank" class="org.springframework.scheduling.quartz.MethodInvokingJobDetailFactoryBean">
		<property name="targetObject">
			<ref bean="reportService" />
		</property>
		<property name="targetMethod">
			<value>buildEventRank</value>
		</property>
	</bean>
	<bean id="buildEventRankTrigger" class="org.springframework.scheduling.quartz.CronTriggerBean">
		<property name="jobDetail">
			<ref bean="buildEventRank" />
		</property>
		<property name="cronExpression">
			<value>0 30 0 * * ?</value>
		</property>
	</bean>
	
	热门商圈统计
	<bean id="buildCircleRank" class="org.springframework.scheduling.quartz.MethodInvokingJobDetailFactoryBean">
		<property name="targetObject">
			<ref bean="reportService" />
		</property>
		<property name="targetMethod">
			<value>buildCircleRank</value>
		</property>
	</bean>
	<bean id="buildCircleRankTrigger" class="org.springframework.scheduling.quartz.CronTriggerBean">
		<property name="jobDetail">
			<ref bean="buildCircleRank" />
		</property>
		
		<property name="cronExpression">
			<value>0 0 1 * * ?</value>
		</property>
	</bean>
	
	商圈人气成员
	<bean id="buildCircleMemberRank" class="org.springframework.scheduling.quartz.MethodInvokingJobDetailFactoryBean">
		<property name="targetObject">
			<ref bean="reportService" />
		</property>
		<property name="targetMethod">
			<value>buildCircleMemberRank</value>
		</property>
	</bean>
	<bean id="buildCircleMemberRankTrigger" class="org.springframework.scheduling.quartz.CronTriggerBean">
		<property name="jobDetail">
			<ref bean="buildCircleMemberRank" />
		</property>
		<property name="cronExpression">
			<value>0 30 1 * * ?</value>
		</property>
	</bean>
	商圈自动解禁
	<bean id="circleUnforbidAuto" class="org.springframework.scheduling.quartz.MethodInvokingJobDetailFactoryBean">
		<property name="targetObject">
			<ref bean="reportService" />
		</property>
		<property name="targetMethod">
			<value>circleUnforbidAuto</value>
		</property>
	</bean>
	<bean id="circleUnforbidAutotTrigger" class="org.springframework.scheduling.quartz.CronTriggerBean">
		<property name="jobDetail">
			<ref bean="circleUnforbidAuto" />
		</property>
		<property name="cronExpression">
			<value>0 0 2 * * ?</value>
		</property>
	</bean>
	
	定时每天早上7点到ectip获取基金数据
	<bean id="getFundDataByJolt" class="org.springframework.scheduling.quartz.MethodInvokingJobDetailFactoryBean">
		<property name="targetObject">
			<ref bean="reportService" />
		</property>
		<property name="targetMethod">
			<value>getFundDataByJolt</value>
		</property>
	</bean>
	<bean id="getFundDataByJoltTrigger" class="org.springframework.scheduling.quartz.CronTriggerBean">
		<property name="jobDetail">
			<ref bean="getFundDataByJolt" />
		</property>
		<property name="cronExpression">
			<value>0 30 2 * * ?</value>
		</property>
	</bean>
	
	交易过期处理
	<bean id="tradeOverAuto" class="org.springframework.scheduling.quartz.MethodInvokingJobDetailFactoryBean">
		<property name="targetObject">
			<ref bean="reportService" />
		</property>
		<property name="targetMethod">
			<value>tradeOverAuto</value>
		</property>
	</bean>
	<bean id="tradeOverAutoTrigger" class="org.springframework.scheduling.quartz.CronTriggerBean">
		<property name="jobDetail">
			<ref bean="tradeOverAuto" />
		</property>
		<property name="cronExpression">
			<value>0 30 1 * * ?</value>
		</property>
	</bean>
	
	b2b订单排名
	<bean id="orderRankB2B" class="org.springframework.scheduling.quartz.MethodInvokingJobDetailFactoryBean">
		<property name="targetObject">
			<ref bean="reportService" />
		</property>
		<property name="targetMethod">
			<value>orderRankB2B</value>
		</property>
	</bean>
	<bean id="orderRankB2BTrigger" class="org.springframework.scheduling.quartz.CronTriggerBean">
		<property name="jobDetail">
			<ref bean="orderRankB2B" />
		</property>
		<property name="cronExpression">
			<value>0 30 1 1/10 * ?</value>
		</property>
	</bean>
	
	b2b私信排名
	<bean id="letterRankB2B" class="org.springframework.scheduling.quartz.MethodInvokingJobDetailFactoryBean">
		<property name="targetObject">
			<ref bean="reportService" />
		</property>
		<property name="targetMethod">
			<value>letterRankB2B</value>
		</property>
	</bean>
	<bean id="letterRankB2BTrigger" class="org.springframework.scheduling.quartz.CronTriggerBean">
		<property name="jobDetail">
			<ref bean="letterRankB2B" />
		</property>
		<property name="cronExpression">
			<value>0 30 1 1/10 * ?</value>
		</property>
	</bean>
	
	<bean class="org.springframework.scheduling.quartz.SchedulerFactoryBean">
		<property name="triggers">
			<list>
				一期暂时不开放
				更新在线用户统计信息 
				<ref local="buildOnlineCountTrigger" />
				
				一期暂时不开放
				每小时同步统计数据
				<ref local="updateOnlineCountTrigger" />
				
				一期暂时不开放
				每天零时清除记录，新建当天记录 
				<ref local="clearOnlineCountTrigger" />
				
				
				<ref local="buildGroupStatisticTrigger" />	
				<ref local="buildConversationStatisticTrigger" />
				<ref local="buildAtStatisticTrigger" />
				<ref local="buildAcessUserCountTrigger" />
				<ref local="buildVisitCountTrigger" />
				热门 话题统计
				<ref local="buildEventRankTrigger" />
				热门商圈统计
				<ref local="buildCircleRankTrigger" />
				商圈人气成员
				<ref local="buildCircleMemberRankTrigger" />
				商圈自动解禁
				<ref local="circleUnforbidAutotTrigger" />
				定时每天到ectip获取基金数据
				<ref local="getFundDataByJoltTrigger" />
				定时每天置过期交易
				<ref local="tradeOverAutoTrigger" />
				定时b2b订单排名
				<ref local="orderRankB2BTrigger" />
				定时b2b私信排名
				<ref local="letterRankB2BTrigger" />
			</list>
		</property>
	</bean> -->
</beans>  